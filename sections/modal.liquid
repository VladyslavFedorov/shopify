<style>
  /* Сховати модальне вікно за замовчуванням */
.modal {
  display: none;
  position: fixed;
  z-index: 1;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.5);
}

.modal-content {
  background-color: #fff;
  margin: 15% auto;
  padding: 20px;
  border: 1px solid #888;
  width: 60%;
}

.close {
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}
</style>

<div id="modal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <p>Це модальне вікно!</p>
  </div>
</div>


<modal-opener data-modal="#QuickAdd-1">
  <button
          id="{{ product_form_id }}-submit"
          type="submit"
          name="add"
          class="quick-add__submit button button--full-width button--secondary{% if horizontal_quick_add %} card--horizontal__quick-add animate-arrow{% endif %}"
          aria-haspopup="dialog"
          aria-labelledby="{{ product_form_id }}-submit title-{{ section_id }}-{{ card_product.id }}"
          data-product-url="{{ card_product.url }}"
  >
    {{ 'products.product.choose_options' | t }}
    {%- if horizontal_quick_add -%}
      <span class="icon-wrap">{% render 'icon-arrow' %}</span>
    {%- endif -%}
    <div class="loading-overlay__spinner hidden">
      <svg
              aria-hidden="true"
              focusable="false"
              class="spinner"
              viewBox="0 0 66 66"
              xmlns="http://www.w3.org/2000/svg"
      >
        <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
      </svg>
    </div>
  </button>
</modal-opener>

<quick-add-modal id="QuickAdd-1" class="quick-add-modal" open>
  <div
          role="dialog"
          aria-label="{{ 'products.product.choose_product_options' | t: product_name: card_product.title | escape }}"
          aria-modal="true"
          class="quick-add-modal__content global-settings-popup"
          tabindex="-1"
  >
    <button
            id="ModalClose-{{ card_product.id }}"
            type="button"
            class="quick-add-modal__toggle"
            aria-label="{{ 'accessibility.close' | t }}"
    >
      {% render 'icon-close' %}
    </button>
    <div id="QuickAddInfo-{{ card_product.id }}" class="quick-add-modal__content-info"></div>
  </div>
</quick-add-modal>

{% schema %}
{
  "name": "Modal",
  "enabled_on": {
    "groups": ["footer"]
  },
  "max_blocks": 1,
  "settings": [
    {
      "type": "range",
      "id": "modal_width",
      "min": 200,
      "max": 1200,
      "step": 10,
      "default": 800,
      "label": "Modal width"
    },
        {
      "type": "select",
      "id": "appearance_options",
      "options": [
        {
          "value": "when_load",
          "label": "When load"
        },
        {
          "value": "when_scroll",
          "label": "When scroll to block"
        }
      ],
      "default": "when_load",
      "label": "Appearance options"
    }
  ],
  "blocks": [
    {
      "type": "Product",
      "name": "Product",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        }
      ]
    },
        {
      "type": "message",
      "name": "Message",
      "settings": [
        {
          "type": "image_picker",
          "id": "background_image",
          "label": "Background image"
        },
        {
          "type": "inline_richtext",
          "id": "title",
          "label": "t:sections.multicolumn.blocks.column.settings.title.label"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "t:sections.multicolumn.blocks.column.settings.text.label"
        },
        {
          "type": "text",
          "id": "link_label",
          "label": "t:sections.multicolumn.blocks.column.settings.link_label.label"
        },
        {
          "type": "url",
          "id": "link",
          "label": "t:sections.multicolumn.blocks.column.settings.link.label"
        }
      ]
    },
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Modal"
    }
  ]
}
{% endschema %}


<script>
const openModalBtn = document.getElementById('openModalBtn');
const modal = document.getElementById('modal');
const closeModal = modal.querySelector('.close');

document.addEventListener('DOMContentLoaded', () => {
  modal.style.display = 'block';
});

closeModal.addEventListener('click', () => {
  modal.style.display = 'none';
});

window.addEventListener('click', (event) => {
  if (event.target === modal) {
    modal.style.display = 'none';
  }
});
</script>
